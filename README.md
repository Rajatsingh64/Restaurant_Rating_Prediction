# ğŸ“Š Restaurant Rating Prediction ğŸš€

This project predicts restaurant ratings using the **Zomato Bengaluru Dataset** from Kaggle. The project implements a robust **MLOps Training Pipeline** in Python 3.12, designed to be modular, scalable, and production-ready.

---

## ğŸ› ï¸ Step-by-Step Explanation

### 1. **Environment Setup**
- Python 3.12 environment was created to ensure compatibility and scalability.
- Installed all necessary libraries specified in `requirements.txt`.

### 2. **Project Folder Structure**

```plaintext
Restaurant-Rating-Prediction/
â”‚
â”œâ”€â”€ artifacts/                        # Contains all intermediate and final outputs
â”œâ”€â”€ saved_models/                     # Production-ready models and transformers
â”‚
â”œâ”€â”€ Dockerfile                        # Docker image setup
â”œâ”€â”€ docker-compose.yml                # Docker Compose for multi-container setup
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ main.yaml                 # GitHub Actions CI/CD pipeline
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/                   # Core pipeline components
â”‚   â”‚   â”œâ”€â”€ data_ingestion.py         # Handles data collection
â”‚   â”‚   â”œâ”€â”€ data_validation.py        # Validates raw data
â”‚   â”‚   â”œâ”€â”€ data_transformation.py    # Prepares data for training
â”‚   â”‚   â”œâ”€â”€ model_training.py         # Trains the machine learning model
â”‚   â”‚   â”œâ”€â”€ model_evaluation.py       # Evaluates the model
â”‚   â”‚   â””â”€â”€ model_pusher.py           # Pushes the trained model to deployment
â”‚   â”‚
â”‚   â”œâ”€â”€ config.py                     # Configuration management and environment variables
â”‚   â”œâ”€â”€ logger.py                     # Logging setup
â”‚   â”œâ”€â”€ utils.py                      # Utility functions
â”‚   â”œâ”€â”€ entity/                       # Data structures for pipeline
â”‚   â”‚   â”œâ”€â”€ config_entity.py          # Configuration-related entities
â”‚   â”‚   â””â”€â”€ artifact_entity.py        # Artifacts generated by pipeline stages
â”‚   â”‚
â”‚   â”œâ”€â”€ pipeline/                     # Pipeline automation
â”‚   â”‚   â”œâ”€â”€ training_pipeline.py      # Automates training workflow
â”‚   â”‚   â””â”€â”€ batch_prediction.py       # Handles batch predictions
â”‚   â”‚
â”‚   â””â”€â”€ exceptions.py                 # Custom exception handling
â”‚
â”œâ”€â”€ app.py                            # Streamlit app for restaurant prediction
â”œâ”€â”€ main.py                           # Entry point for training and predictions
â”œâ”€â”€ data_dump.py                      # Dumps data into MongoDB Atlas
â”œâ”€â”€ setup.py                          # Package setup for `src`
â”œâ”€â”€ LICENSE                           # MIT License file
â”œâ”€â”€ README.md                         # Project documentation
â”œâ”€â”€ requirements.txt                  # Dependencies for the project
â””â”€â”€ research.ipynb                    # Jupyter notebooks for initial analysis
```

---

## ğŸš€ Deployment to EC2 Using GitHub Actions

This project is deployed on an EC2 instance using Docker and GitHub Actions. Below are the steps for deployment:

### 1. **Create an EC2 Instance**
- Launch an EC2 instance with Amazon Linux 2 or Ubuntu.
- Configure security groups to allow HTTP (port 80) and SSH (port 22).
- Connect to the instance using SSH.

### 2. **Install Docker on EC2**
```bash
# Update packages
sudo apt update -y && sudo apt upgrade -y

# Install Docker
sudo apt install docker.io -y

# Start Docker service
sudo systemctl start docker
sudo systemctl enable docker

# Add current user to the Docker group
sudo usermod -aG docker $USER
```

### 3. **Set Up GitHub Secrets**
Add the following secrets to your GitHub repository:
- `EC2_HOST`: The public IP or domain name of your EC2 instance.
- `EC2_USER`: The username for SSH (e.g., `ubuntu` for Ubuntu).
- `EC2_KEY`: The private key for accessing the EC2 instance.

### 4. **Configure GitHub Workflow**
Edit the `main.yaml` file under `.github/workflows/` with the following content:

```yaml
name: Deploy to EC2

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Set up SSH
        uses: webfactory/ssh-agent@v0.5.3
        with:
          ssh-private-key: ${{ secrets.EC2_KEY }}

      - name: Copy files to EC2
        run: |
          scp -o StrictHostKeyChecking=no -r * ${{ secrets.EC2_USER }}@${{ secrets.EC2_HOST }}:/home/${{ secrets.EC2_USER }}/app

      - name: Deploy Docker on EC2
        run: |
          ssh -o StrictHostKeyChecking=no ${{ secrets.EC2_USER }}@${{ secrets.EC2_HOST }} << 'EOF'
          cd /home/${{ secrets.EC2_USER }}/app
          docker-compose down
          docker-compose up -d --build
          EOF
```

### 5. **Trigger Deployment**
- Push changes to the `main` branch.
- GitHub Actions will automatically deploy the latest version to your EC2 instance.

---

## ğŸŒ Access the Application
- Open your browser and navigate to the public IP or domain of your EC2 instance.
- You should see the Streamlit app running.

---

## ğŸ“„ License
This project is licensed under the MIT License. See the `LICENSE` file for details.
